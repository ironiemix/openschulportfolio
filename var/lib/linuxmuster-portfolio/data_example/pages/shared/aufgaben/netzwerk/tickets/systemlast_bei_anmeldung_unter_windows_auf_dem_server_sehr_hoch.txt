<- [[:shared:aufgaben:netzwerk:start]]

====== Systemlast bei Anmeldung unter Windows auf dem Server sehr hoch ======

~~TASK:Frank Schiebel?~~


====== Problem ======
 

 * ''smbstatus'' zeigt in Zeiten hoher Last heftige und viele Zugriffe auf die Datei ''urlclassifier3.sqlite'' im serverbasierten Firefox-Profil an

-> **Erste Vermutung zur Ursache:** safe_browsing im Firefox aktualisiert bei allen Benutzern gleichzeitig die Liste und legt so Netz und samba lahm.

====== Lösung ======


Shell Skript: 

  #/bin/bash
  
  PREFS="prefs.js"
  URLC1="urlclassifier3.sqlite"
  URLC2="urlclassifier2.sqlite"  
  
  for i in `find /home/students -type d -name '*firefox'`; do
  echo "working on $i ..."
  
  echo "   changing prefs... "
  grep -q safebrowsing.enabled $i/$PREFS ||  echo   "user_pref(\"browser.safebrowsing.enabled\", false);" >> $i/$PREFS
  grep -q safebrowsing.malware.enabled $i/$PREFS || echo "user_pref(\"browser.safebrowsing.malware.enabled\", false);" >> $i/$PREFS
  grep -q safebrowsing.remoteLookups $i/$PREFS || echo "user_pref(\"browser.safebrowsing.remoteLookups\", false);" >> $i/$PREFS
  
  echo "   resetting urlclassifier-files..."
  echo -n > $i/$URLC1
  echo -n > $i/$URLC2
  echo "done!"
  
  
  done

Fügt die Optionen in die FF Einstellungen ein uns setzt die Dateigrößen der Datenbankfiles auf Null.

Kontrolle am Montag, 01.03.2010: Unterricht hat begonnen, Load ist 0.3, scheintgeklappt zu haben.
 --- //[[schiebel@aeg-reutlingen.de|Frank Schiebel]] 01.03.2010 10:54//